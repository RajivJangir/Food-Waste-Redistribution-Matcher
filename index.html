<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FoodSave - Reduce Waste, Feed People</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.6.8/axios.min.js"></script>
    <style>
        :root {
            --primary: #4CAF50;
            --primary-dark: #388E3C;
            --secondary: #FF9800;
            --light: #F5F5F5;
            --dark: #333;
            --gray: #757575;
            --danger: #F44336;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f0f2f5;
            color: #333;
            line-height: 1.6;
        }
        
        /* Header Styles */
        header {
            background-color: white;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            position: sticky;
            top: 0;
            z-index: 100;
        }
        
        .navbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 5%;
            max-width: 1400px;
            margin: 0 auto;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .logo i {
            color: var(--primary);
            font-size: 2rem;
        }
        
        .logo h1 {
            font-size: 1.8rem;
            color: var(--primary-dark);
        }
        
        .logo span {
            color: var(--secondary);
        }
        
        .nav-links {
            display: flex;
            gap: 2rem;
        }
        
        .nav-links a {
            text-decoration: none;
            color: var(--dark);
            font-weight: 500;
            transition: color 0.3s;
        }
        
        .nav-links a:hover {
            color: var(--primary);
        }
        
        .nav-buttons {
            display: flex;
            gap: 1rem;
        }
        
        .btn {
            padding: 0.7rem 1.5rem;
            border-radius: 4px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            border: none;
            font-size: 1rem;
        }
        
        .btn-outline {
            background: transparent;
            border: 2px solid var(--primary);
            color: var(--primary);
        }
        
        .btn-outline:hover {
            background: var(--primary);
            color: white;
        }
        
        .btn-primary {
            background: var(--primary);
            color: white;
        }
        
        .btn-primary:hover {
            background: var(--primary-dark);
        }
        
        .btn-secondary {
            background: var(--secondary);
            color: white;
        }
        
        .btn-secondary:hover {
            background: #e68a00;
        }
        
        /* Hero Section */
        .hero {
            background: linear-gradient(rgba(0,0,0,0.7), rgba(0,0,0,0.7)), url('https://images.unsplash.com/photo-1504674900247-0877df9cc836?ixlib=rb-4.0.3&auto=format&fit=crop&w=1950&q=80');
            background-size: cover;
            background-position: center;
            color: white;
            padding: 5rem 5%;
            text-align: center;
        }
        
        .hero-content {
            max-width: 800px;
            margin: 0 auto;
        }
        
        .hero h2 {
            font-size: 3rem;
            margin-bottom: 1rem;
        }
        
        .hero p {
            font-size: 1.2rem;
            margin-bottom: 2rem;
            opacity: 0.9;
        }
        
        .stats {
            display: flex;
            justify-content: center;
            gap: 3rem;
            margin-top: 3rem;
            flex-wrap: wrap;
        }
        
        .stat-item {
            background: rgba(255,255,255,0.1);
            padding: 1.5rem;
            border-radius: 8px;
            min-width: 180px;
        }
        
        .stat-item h3 {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
            color: var(--secondary);
        }
        
        /* How It Works */
        .how-it-works {
            padding: 5rem 5%;
            background: white;
        }
        
        .section-title {
            text-align: center;
            margin-bottom: 3rem;
        }
        
        .section-title h2 {
            font-size: 2.5rem;
            color: var(--primary-dark);
            margin-bottom: 1rem;
        }
        
        .section-title p {
            color: var(--gray);
            max-width: 700px;
            margin: 0 auto;
        }
        
        .steps {
            display: flex;
            justify-content: space-between;
            gap: 2rem;
            max-width: 1200px;
            margin: 0 auto;
            flex-wrap: wrap;
        }
        
        .step-card {
            flex: 1;
            min-width: 250px;
            background: var(--light);
            padding: 2rem;
            border-radius: 8px;
            text-align: center;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            transition: transform 0.3s;
        }
        
        .step-card:hover {
            transform: translateY(-10px);
        }
        
        .step-icon {
            width: 80px;
            height: 80px;
            background: var(--primary);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 1.5rem;
        }
        
        .step-icon i {
            font-size: 2.5rem;
            color: white;
        }
        
        .step-card h3 {
            margin-bottom: 1rem;
            color: var(--primary-dark);
        }
        
        /* Food Listings */
        .listings {
            padding: 5rem 5%;
            background: #f9f9f9;
        }
        
        .listing-filters {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-bottom: 2rem;
            flex-wrap: wrap;
        }
        
        .filter-btn {
            padding: 0.5rem 1.5rem;
            background: white;
            border: 1px solid #ddd;
            border-radius: 30px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .filter-btn.active {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }
        
        .food-cards {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 2rem;
            max-width: 1300px;
            margin: 0 auto;
        }
        
        .food-card {
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            transition: transform 0.3s;
            position: relative;
        }
        
        .food-card:hover {
            transform: translateY(-5px);
        }
        
        .food-img {
            height: 200px;
            background-size: cover;
            background-position: center;
        }
        
        .food-info {
            padding: 1.5rem;
        }
        
        .food-title {
            display: flex;
            justify-content: space-between;
            margin-bottom: 0.5rem;
        }
        
        .food-title h3 {
            font-size: 1.3rem;
            color: var(--primary-dark);
        }
        
        .food-quantity {
            background: var(--secondary);
            color: white;
            padding: 0.2rem 0.8rem;
            border-radius: 20px;
            font-size: 0.9rem;
        }
        
        .food-location {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: var(--gray);
            margin: 0.5rem 0;
        }
        
        .food-expiry {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin: 1rem 0;
            font-weight: 500;
        }
        
        .food-expiry .urgent {
            color: var(--danger);
        }
        
        .food-actions {
            display: flex;
            justify-content: space-between;
            margin-top: 1rem;
        }
        
        /* Map Section */
        .map-section {
            padding: 5rem 5%;
            background: white;
        }
        
        .map-container {
            height: 500px;
            background: #e9e9e9;
            border-radius: 8px;
            overflow: hidden;
            position: relative;
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--gray);
        }
        
        .map-overlay {
            position: absolute;
            top: 20px;
            left: 20px;
            background: white;
            padding: 1.5rem;
            border-radius: 8px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            z-index: 10;
            max-width: 300px;
        }
        
        .map-overlay h3 {
            margin-bottom: 1rem;
            color: var(--primary-dark);
        }
        
        .route-info {
            display: flex;
            justify-content: space-between;
            margin-top: 1rem;
            padding-top: 1rem;
            border-top: 1px solid #eee;
        }
        
        .info-item p:first-child {
            font-size: 0.9rem;
            color: var(--gray);
        }
        
        .info-item p:last-child {
            font-weight: bold;
            font-size: 1.2rem;
        }
        
        /* Footer */
        footer {
            background: var(--primary-dark);
            color: white;
            padding: 4rem 5% 2rem;
        }
        
        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 3rem;
            max-width: 1300px;
            margin: 0 auto;
        }
        
        .footer-col h3 {
            font-size: 1.5rem;
            margin-bottom: 1.5rem;
            position: relative;
        }
        
        .footer-col h3::after {
            content: '';
            position: absolute;
            left: 0;
            bottom: -8px;
            width: 50px;
            height: 2px;
            background: var(--secondary);
        }
        
        .footer-links {
            list-style: none;
        }
        
        .footer-links li {
            margin-bottom: 0.8rem;
        }
        
        .footer-links a {
            color: #ddd;
            text-decoration: none;
            transition: color 0.3s;
        }
        
        .footer-links a:hover {
            color: white;
        }
        
        .social-links {
            display: flex;
            gap: 1rem;
            margin-top: 1.5rem;
        }
        
        .social-links a {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 40px;
            height: 40px;
            background: rgba(255,255,255,0.1);
            border-radius: 50%;
            color: white;
            transition: background 0.3s;
        }
        
        .social-links a:hover {
            background: var(--secondary);
        }
        
        .copyright {
            text-align: center;
            padding-top: 2rem;
            margin-top: 3rem;
            border-top: 1px solid rgba(255,255,255,0.1);
            color: #aaa;
            font-size: 0.9rem;
        }
        
        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }
        
        .modal-content {
            background: white;
            border-radius: 8px;
            width: 90%;
            max-width: 500px;
            padding: 2rem;
            position: relative;
        }
        
        .modal-close {
            position: absolute;
            top: 15px;
            right: 15px;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--gray);
        }
        
        .modal-title {
            margin-bottom: 1.5rem;
            color: var(--primary-dark);
        }
        
        .form-group {
            margin-bottom: 1.5rem;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
        }
        
        .form-group input, 
        .form-group select, 
        .form-group textarea {
            width: 100%;
            padding: 0.8rem;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 1rem;
        }
        
        .form-group textarea {
            height: 100px;
        }
        
        .dashboard {
            padding: 2rem 5%;
            max-width: 1400px;
            margin: 0 auto;
        }
        
        .dashboard-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }
        
        .stat-card {
            background: white;
            border-radius: 8px;
            padding: 1.5rem;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            text-align: center;
        }
        
        .stat-card h3 {
            font-size: 2.5rem;
            color: var(--primary);
            margin-bottom: 0.5rem;
        }
        
        .chart-container {
            background: white;
            border-radius: 8px;
            padding: 1.5rem;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            margin-bottom: 2rem;
        }
        
        .recent-listings {
            background: white;
            border-radius: 8px;
            padding: 1.5rem;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        
        .recent-listings h3 {
            margin-bottom: 1rem;
            color: var(--primary-dark);
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            .navbar {
                flex-direction: column;
                gap: 1rem;
            }
            
            .nav-links {
                gap: 1rem;
            }
            
            .hero h2 {
                font-size: 2.2rem;
            }
            
            .steps {
                flex-direction: column;
            }
            
            .stats {
                gap: 1rem;
            }
            
            .stat-item {
                min-width: 140px;
                padding: 1rem;
            }
            
            .stat-item h3 {
                font-size: 2rem;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="navbar">
            <div class="logo">
                <i class="fas fa-leaf"></i>
                <h1>Food<span>Save</span></h1>
            </div>
            <div class="nav-links">
                <a href="#" class="active">Home</a>
                <a href="#listings">Listings</a>
                <a href="#routes">Routes</a>
                <a href="#dashboard">Dashboard</a>
                <a href="#about">About</a>
            </div>
            <div class="nav-buttons">
                <button class="btn btn-outline" id="loginBtn">Login</button>
                <button class="btn btn-primary" id="signupBtn">Sign Up</button>
            </div>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="hero">
        <div class="hero-content">
            <h2>Connecting Surplus Food With Those In Need</h2>
            <p>Join our platform to reduce food waste and fight hunger in your community. Restaurants, grocery stores, and individuals can donate surplus food that shelters and food banks can claim instantly.</p>
            <div>
                <button class="btn btn-primary" id="donateBtn" style="margin-right: 10px;">Donate Food</button>
                <button class="btn btn-outline" id="claimBtn">Claim Food</button>
            </div>
            
            <div class="stats">
                <div class="stat-item">
                    <h3 id="mealsSaved">25K+</h3>
                    <p>Meals Saved</p>
                </div>
                <div class="stat-item">
                    <h3 id="activeDonors">1.2K+</h3>
                    <p>Active Donors</p>
                </div>
                <div class="stat-item">
                    <h3 id="recipients">650+</h3>
                    <p>Recipient Organizations</p>
                </div>
                <div class="stat-item">
                    <h3 id="cities">85+</h3>
                    <p>Cities</p>
                </div>
            </div>
        </div>
    </section>

    <!-- How It Works -->
    <section class="how-it-works">
        <div class="section-title">
            <h2>How It Works</h2>
            <p>Our platform makes food redistribution simple and efficient</p>
        </div>
        
        <div class="steps">
            <div class="step-card">
                <div class="step-icon">
                    <i class="fas fa-utensils"></i>
                </div>
                <h3>List Surplus Food</h3>
                <p>Restaurants, grocery stores, or individuals list available surplus food with details about type, quantity, and pickup time.</p>
            </div>
            
            <div class="step-card">
                <div class="step-icon">
                    <i class="fas fa-bell"></i>
                </div>
                <h3>Instant Notification</h3>
                <p>Nearby shelters and food banks receive instant notifications about available food donations.</p>
            </div>
            
            <div class="step-card">
                <div class="step-icon">
                    <i class="fas fa-hand-holding-heart"></i>
                </div>
                <h3>Claim & Schedule</h3>
                <p>Recipients claim donations and schedule a pickup time that works for both parties.</p>
            </div>
            
            <div class="step-card">
                <div class="step-icon">
                    <i class="fas fa-route"></i>
                </div>
                <h3>Optimized Pickup</h3>
                <p>Drivers get optimized routes for efficient food collection and distribution.</p>
            </div>
        </div>
    </section>

    <!-- Food Listings -->
    <section class="listings" id="listings">
        <div class="section-title">
            <h2>Available Food Donations</h2>
            <p>Fresh food ready for immediate redistribution</p>
        </div>
        
        <div class="listing-filters">
            <button class="filter-btn active" data-category="all">All</button>
            <button class="filter-btn" data-category="vegetables">Vegetables</button>
            <button class="filter-btn" data-category="fruits">Fruits</button>
            <button class="filter-btn" data-category="bakery">Bakery</button>
            <button class="filter-btn" data-category="prepared">Prepared Food</button>
            <button class="filter-btn" data-category="dairy">Dairy</button>
        </div>
        
        <div class="food-cards" id="foodListings">
            <!-- Food listings will be populated by JavaScript -->
        </div>
    </section>

    <!-- Map Section -->
    <section class="map-section" id="routes">
        <div class="section-title">
            <h2>Optimized Collection Routes</h2>
            <p>Efficient paths for collecting and distributing food donations</p>
        </div>
        
        <div class="map-container">
            <div class="map-overlay">
                <h3>Today's Route</h3>
                <p>Driver: Sarah Johnson</p>
                <p>Vehicle: Refrigerated Van</p>
                
                <div class="route-info">
                    <div class="info-item">
                        <p>Total Distance</p>
                        <p>12.4 km</p>
                    </div>
                    <div class="info-item">
                        <p>Estimated Time</p>
                        <p>48 mins</p>
                    </div>
                </div>
                
                <div class="route-info">
                    <div class="info-item">
                        <p>Pickups</p>
                        <p id="routePickups">4 locations</p>
                    </div>
                    <div class="info-item">
                        <p>Food Quantity</p>
                        <p id="routeQuantity">85 kg</p>
                    </div>
                </div>
                
                <button class="btn btn-primary" style="width: 100%; margin-top: 15px;" id="startRouteBtn">Start Route</button>
            </div>
            <i class="fas fa-route" style="font-size: 5rem; opacity: 0.2;"></i>
        </div>
    </section>

    <!-- Dashboard -->
    <section class="dashboard" id="dashboard">
        <div class="dashboard-header">
            <h2 class="section-title">Organization Dashboard</h2>
            <button class="btn btn-secondary" id="addListingBtn">Add Food Listing</button>
        </div>
        
        <div class="stats-grid">
            <div class="stat-card">
                <h3 id="totalDonations">142</h3>
                <p>Total Donations</p>
            </div>
            <div class="stat-card">
                <h3 id="mealsProvided">25,680</h3>
                <p>Meals Provided</p>
            </div>
            <div class="stat-card">
                <h3 id="co2Reduced">42.5</h3>
                <p>CO₂ Reduced (tons)</p>
            </div>
            <div class="stat-card">
                <h3 id="activeDrivers">28</h3>
                <p>Active Drivers</p>
            </div>
        </div>
        
        <div class="chart-container">
            <h3>Monthly Food Distribution</h3>
            <canvas id="distributionChart" height="300"></canvas>
        </div>
        
        <div class="recent-listings">
            <h3>Recent Food Listings</h3>
            <div class="food-cards" id="recentListings">
                <!-- Recent listings will be populated by JavaScript -->
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer id="about">
        <div class="footer-content">
            <div class="footer-col">
                <h3>FoodSave</h3>
                <p>Connecting surplus food with communities in need to reduce waste and fight hunger.</p>
                <div class="social-links">
                    <a href="#"><i class="fab fa-facebook-f"></i></a>
                    <a href="#"><i class="fab fa-twitter"></i></a>
                    <a href="#"><i class="fab fa-instagram"></i></a>
                    <a href="#"><i class="fab fa-linkedin-in"></i></a>
                </div>
            </div>
            
            <div class="footer-col">
                <h3>Quick Links</h3>
                <ul class="footer-links">
                    <li><a href="#">Home</a></li>
                    <li><a href="#about">About Us</a></li>
                    <li><a href="#how-it-works">How It Works</a></li>
                    <li><a href="#listings">Listings</a></li>
                    <li><a href="#routes">Routes</a></li>
                </ul>
            </div>
            
            <div class="footer-col">
                <h3>For Donors</h3>
                <ul class="footer-links">
                    <li><a href="#" id="footerDonateBtn">Register as Donor</a></li>
                    <li><a href="#">Food Safety Guidelines</a></li>
                    <li><a href="#">Donation Impact</a></li>
                    <li><a href="#">Tax Benefits</a></li>
                </ul>
            </div>
            
            <div class="footer-col">
                <h3>Contact Us</h3>
                <ul class="footer-links">
                    <li><i class="fas fa-map-marker-alt"></i> 123 Green St, Eco City</li>
                    <li><i class="fas fa-phone"></i> (123) 456-7890</li>
                    <li><i class="fas fa-envelope"></i> info@foodsave.org</li>
                </ul>
            </div>
        </div>
        
        <div class="copyright">
            <p>&copy; 2023 FoodSave. All rights reserved. Reducing food waste, feeding communities.</p>
        </div>
    </footer>

    <!-- Modals -->
    <div class="modal" id="loginModal">
        <div class="modal-content">
            <span class="modal-close" id="closeLogin">&times;</span>
            <h2 class="modal-title">Login to Your Account</h2>
            <div class="form-group">
                <label for="loginEmail">Email</label>
                <input type="email" id="loginEmail" placeholder="Enter your email">
            </div>
            <div class="form-group">
                <label for="loginPassword">Password</label>
                <input type="password" id="loginPassword" placeholder="Enter your password">
            </div>
            <button class="btn btn-primary" id="doLogin" style="width: 100%;">Login</button>
            <p style="text-align: center; margin-top: 1rem;">Don't have an account? <a href="#" id="showSignup">Sign Up</a></p>
        </div>
    </div>
    
    <div class="modal" id="signupModal">
        <div class="modal-content">
            <span class="modal-close" id="closeSignup">&times;</span>
            <h2 class="modal-title">Create an Account</h2>
            <div class="form-group">
                <label for="userType">I am a:</label>
                <select id="userType">
                    <option value="donor">Food Donor (Restaurant/Grocery)</option>
                    <option value="recipient">Food Recipient (Shelter/Food Bank)</option>
                    <option value="driver">Driver/Volunteer</option>
                </select>
            </div>
            <div class="form-group">
                <label for="signupName">Full Name / Organization Name</label>
                <input type="text" id="signupName" placeholder="Enter your name">
            </div>
            <div class="form-group">
                <label for="signupEmail">Email</label>
                <input type="email" id="signupEmail" placeholder="Enter your email">
            </div>
            <div class="form-group">
                <label for="signupPassword">Password</label>
                <input type="password" id="signupPassword" placeholder="Create a password">
            </div>
            <div class="form-group">
                <label for="signupAddress">Address</label>
                <input type="text" id="signupAddress" placeholder="Enter your address">
            </div>
            <button class="btn btn-primary" id="doSignup" style="width: 100%;">Create Account</button>
            <p style="text-align: center; margin-top: 1rem;">Already have an account? <a href="#" id="showLogin">Login</a></p>
        </div>
    </div>
    
    <div class="modal" id="donateModal">
        <div class="modal-content">
            <span class="modal-close" id="closeDonate">&times;</span>
            <h2 class="modal-title">Donate Surplus Food</h2>
            <div class="form-group">
                <label for="foodName">Food Item Name</label>
                <input type="text" id="foodName" placeholder="e.g., Fresh Vegetables, Baked Goods">
            </div>
            <div class="form-group">
                <label for="foodCategory">Category</label>
                <select id="foodCategory">
                    <option value="vegetables">Vegetables</option>
                    <option value="fruits">Fruits</option>
                    <option value="bakery">Bakery</option>
                    <option value="prepared">Prepared Food</option>
                    <option value="dairy">Dairy</option>
                    <option value="other">Other</option>
                </select>
            </div>
            <div class="form-group">
                <label for="foodQuantity">Quantity</label>
                <input type="text" id="foodQuantity" placeholder="e.g., 10 kg, 25 units">
            </div>
            <div class="form-group">
                <label for="foodDescription">Description</label>
                <textarea id="foodDescription" placeholder="Describe the food items..."></textarea>
            </div>
            <div class="form-group">
                <label for="expiryDate">Expiry Date</label>
                <input type="date" id="expiryDate">
            </div>
            <div class="form-group">
                <label for="pickupTime">Preferred Pickup Time</label>
                <input type="datetime-local" id="pickupTime">
            </div>
            <button class="btn btn-primary" id="submitDonation" style="width: 100%;">Submit Donation</button>
        </div>
    </div>

    <script>
        // Mock database using localStorage
        class Database {
            constructor() {
                this.KEY_LISTINGS = 'foodListings';
                this.KEY_USERS = 'users';
                this.KEY_STATS = 'stats';
                this.KEY_CLAIMS = 'claims';
                this.initializeData();
            }
            
            initializeData() {
                // Initialize listings if not exists
                if (!localStorage.getItem(this.KEY_LISTINGS)) {
                    const listings = [
                        {
                            id: 1,
                            name: "Fresh Vegetables",
                            category: "vegetables",
                            quantity: "25 kg",
                            description: "Assorted fresh vegetables including carrots, potatoes, and bell peppers.",
                            expiry: new Date(Date.now() + 86400000).toISOString().split('T')[0],
                            location: "Green Grocers, Downtown",
                            donor: "Green Grocers",
                            available: true,
                            image: "https://images.unsplash.com/photo-1542838132-92c53300491e?ixlib=rb-4.0.3&auto=format&fit=crop&w=1050&q=80"
                        },
                        {
                            id: 2,
                            name: "Bakery Items",
                            category: "bakery",
                            quantity: "50 units",
                            description: "Assorted bread, pastries, and muffins from today's baking.",
                            expiry: new Date(Date.now() + 2 * 86400000).toISOString().split('T')[0],
                            location: "City Bakery, West End",
                            donor: "City Bakery",
                            available: true,
                            image: "https://images.unsplash.com/photo-1509440159596-0249088772ff?ixlib=rb-4.0.3&auto=format&fit=crop&w=1052&q=80"
                        },
                        {
                            id: 3,
                            name: "Fresh Fruits",
                            category: "fruits",
                            quantity: "15 kg",
                            description: "Seasonal fruits including apples, bananas, and oranges.",
                            expiry: new Date(Date.now() + 3 * 86400000).toISOString().split('T')[0],
                            location: "Fresh Market, East Side",
                            donor: "Fresh Market",
                            available: true,
                            image: "https://images.unsplash.com/photo-1566385101042-1a0aa0c1268d?ixlib=rb-4.0.3&auto=format&fit=crop&w=1050&q=80"
                        },
                        {
                            id: 4,
                            name: "Sandwiches & Wraps",
                            category: "prepared",
                            quantity: "35 units",
                            description: "Freshly prepared sandwiches and wraps from lunch service.",
                            expiry: new Date(Date.now() + 86400000).toISOString().split('T')[0],
                            location: "Cafe Central",
                            donor: "Cafe Central",
                            available: true,
                            image: "https://images.unsplash.com/photo-1568901346375-23c9450c58cd?ixlib=rb-4.0.3&auto=format&fit=crop&w=1050&q=80"
                        }
                    ];
                    localStorage.setItem(this.KEY_LISTINGS, JSON.stringify(listings));
                }
                
                // Initialize stats if not exists
                if (!localStorage.getItem(this.KEY_STATS)) {
                    const stats = {
                        mealsSaved: 25680,
                        activeDonors: 142,
                        recipients: 65,
                        cities: 28,
                        totalDonations: 142,
                        mealsProvided: 25680,
                        co2Reduced: 42.5,
                        activeDrivers: 28,
                        routePickups: 4,
                        routeQuantity: "85 kg"
                    };
                    localStorage.setItem(this.KEY_STATS, JSON.stringify(stats));
                }
                
                // Initialize claims if not exists
                if (!localStorage.getItem(this.KEY_CLAIMS)) {
                    localStorage.setItem(this.KEY_CLAIMS, JSON.stringify([]));
                }
            }
            
            getListings() {
                return JSON.parse(localStorage.getItem(this.KEY_LISTINGS)) || [];
            }
            
            saveListing(listing) {
                const listings = this.getListings();
                listing.id = listings.length > 0 ? Math.max(...listings.map(l => l.id)) + 1 : 1;
                listing.available = true;
                listings.push(listing);
                localStorage.setItem(this.KEY_LISTINGS, JSON.stringify(listings));
                return listing;
            }
            
            updateListing(updatedListing) {
                const listings = this.getListings();
                const index = listings.findIndex(l => l.id === updatedListing.id);
                if (index !== -1) {
                    listings[index] = updatedListing;
                    localStorage.setItem(this.KEY_LISTINGS, JSON.stringify(listings));
                    return true;
                }
                return false;
            }
            
            getStats() {
                return JSON.parse(localStorage.getItem(this.KEY_STATS)) || {};
            }
            
            updateStats(newStats) {
                const stats = this.getStats();
                const updatedStats = {...stats, ...newStats};
                localStorage.setItem(this.KEY_STATS, JSON.stringify(updatedStats));
                return updatedStats;
            }
            
            addClaim(claim) {
                const claims = JSON.parse(localStorage.getItem(this.KEY_CLAIMS)) || [];
                claim.id = claims.length > 0 ? Math.max(...claims.map(c => c.id)) + 1 : 1;
                claims.push(claim);
                localStorage.setItem(this.KEY_CLAIMS, JSON.stringify(claims));
                
                // Update listing availability
                const listings = this.getListings();
                const listingIndex = listings.findIndex(l => l.id === claim.listingId);
                if (listingIndex !== -1) {
                    listings[listingIndex].available = false;
                    localStorage.setItem(this.KEY_LISTINGS, JSON.stringify(listings));
                }
                
                return claim;
            }
        }

        // App Controller
        class FoodSaveApp {
            constructor() {
                this.db = new Database();
                this.currentUser = null;
                this.init();
            }
            
            init() {
                this.loadStats();
                this.renderListings();
                this.setupEventListeners();
                this.setupCharts();
            }
            
            loadStats() {
                const stats = this.db.getStats();
                
                // Update UI elements
                document.getElementById('mealsSaved').textContent = this.formatNumber(stats.mealsSaved) + '+';
                document.getElementById('activeDonors').textContent = this.formatNumber(stats.activeDonors) + '+';
                document.getElementById('recipients').textContent = this.formatNumber(stats.recipients) + '+';
                document.getElementById('cities').textContent = this.formatNumber(stats.cities) + '+';
                
                document.getElementById('totalDonations').textContent = stats.totalDonations;
                document.getElementById('mealsProvided').textContent = this.formatNumber(stats.mealsProvided);
                document.getElementById('co2Reduced').textContent = stats.co2Reduced;
                document.getElementById('activeDrivers').textContent = stats.activeDrivers;
                
                document.getElementById('routePickups').textContent = stats.routePickups + ' locations';
                document.getElementById('routeQuantity').textContent = stats.routeQuantity;
            }
            
            formatNumber(num) {
                if (num >= 1000) {
                    return (num / 1000).toFixed(1) + 'K';
                }
                return num;
            }
            
            renderListings() {
                const listingsContainer = document.getElementById('foodListings');
                const recentContainer = document.getElementById('recentListings');
                const listings = this.db.getListings();
                
                listingsContainer.innerHTML = '';
                recentContainer.innerHTML = '';
                
                // Get recent listings (last 3)
                const recentListings = [...listings].reverse().slice(0, 3);
                
                listings.forEach(listing => {
                    listingsContainer.appendChild(this.createFoodCard(listing));
                });
                
                recentListings.forEach(listing => {
                    recentContainer.appendChild(this.createFoodCard(listing));
                });
            }
            
            createFoodCard(listing) {
                const daysUntilExpiry = Math.floor((new Date(listing.expiry) - new Date()) / (1000 * 60 * 60 * 24));
                const isUrgent = daysUntilExpiry <= 1;
                
                const card = document.createElement('div');
                card.className = 'food-card';
                card.innerHTML = `
                    <div class="food-img" style="background-image: url('${listing.image}')"></div>
                    <div class="food-info">
                        <div class="food-title">
                            <h3>${listing.name}</h3>
                            <div class="food-quantity">${listing.quantity}</div>
                        </div>
                        <div class="food-location">
                            <i class="fas fa-map-marker-alt"></i>
                            <span>${listing.location}</span>
                        </div>
                        <p>${listing.description}</p>
                        <div class="food-expiry">
                            <i class="fas fa-clock"></i>
                            <span class="${isUrgent ? 'urgent' : ''}">Expires in ${daysUntilExpiry} day${daysUntilExpiry !== 1 ? 's' : ''}</span>
                        </div>
                        <div class="food-actions">
                            <button class="btn btn-outline details-btn" data-id="${listing.id}">Details</button>
                            <button class="btn ${listing.available ? 'btn-primary' : 'btn-secondary'}" data-id="${listing.id}">
                                ${listing.available ? 'Claim' : 'Claimed'}
                            </button>
                        </div>
                    </div>
                `;
                
                return card;
            }
            
            setupCharts() {
                const ctx = document.getElementById('distributionChart').getContext('2d');
                new Chart(ctx, {
                    type: 'bar',
                    data: {
                        labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],
                        datasets: [{
                            label: 'Food Donations (kg)',
                            data: [120, 190, 150, 220, 180, 300, 280, 250, 320, 350, 400, 380],
                            backgroundColor: '#4CAF50',
                            borderColor: '#388E3C',
                            borderWidth: 1
                        }]
                    },
                    options: {
                        responsive: true,
                        scales: {
                            y: {
                                beginAtZero: true
                            }
                        }
                    }
                });
            }
            
            showModal(modalId) {
                document.getElementById(modalId).style.display = 'flex';
            }
            
            hideModal(modalId) {
                document.getElementById(modalId).style.display = 'none';
            }
            
            setupEventListeners() {
                // Modal toggles
                document.getElementById('loginBtn').addEventListener('click', () => this.showModal('loginModal'));
                document.getElementById('signupBtn').addEventListener('click', () => this.showModal('signupModal'));
                document.getElementById('donateBtn').addEventListener('click', () => this.showModal('donateModal'));
                document.getElementById('footerDonateBtn').addEventListener('click', () => this.showModal('donateModal'));
                document.getElementById('addListingBtn').addEventListener('click', () => this.showModal('donateModal'));
                document.getElementById('claimBtn').addEventListener('click', () => {
                    alert('Please log in to claim food donations');
                    this.showModal('loginModal');
                });
                
                // Modal close buttons
                document.getElementById('closeLogin').addEventListener('click', () => this.hideModal('loginModal'));
                document.getElementById('closeSignup').addEventListener('click', () => this.hideModal('signupModal'));
                document.getElementById('closeDonate').addEventListener('click', () => this.hideModal('donateModal'));
                
                // Switch between login and signup
                document.getElementById('showSignup').addEventListener('click', (e) => {
                    e.preventDefault();
                    this.hideModal('loginModal');
                    this.showModal('signupModal');
                });
                
                document.getElementById('showLogin').addEventListener('click', (e) => {
                    e.preventDefault();
                    this.hideModal('signupModal');
                    this.showModal('loginModal');
                });
                
                // Form submissions
                document.getElementById('doLogin').addEventListener('click', () => {
                    alert('Login functionality would connect to backend in a real application');
                    this.hideModal('loginModal');
                });
                
                document.getElementById('doSignup').addEventListener('click', () => {
                    alert('Account created! You can now list or claim food.');
                    this.hideModal('signupModal');
                });
                
                document.getElementById('submitDonation').addEventListener('click', () => {
                    const foodName = document.getElementById('foodName').value;
                    const foodCategory = document.getElementById('foodCategory').value;
                    const foodQuantity = document.getElementById('foodQuantity').value;
                    const foodDescription = document.getElementById('foodDescription').value;
                    const expiryDate = document.getElementById('expiryDate').value;
                    
                    if (!foodName || !foodQuantity || !expiryDate) {
                        alert('Please fill in all required fields');
                        return;
                    }
                    
                    // Get a random food image based on category
                    const categoryImages = {
                        vegetables: 'https://images.unsplash.com/photo-1542838132-92c53300491e?ixlib=rb-4.0.3&auto=format&fit=crop&w=1050&q=80',
                        fruits: 'https://images.unsplash.com/photo-1566385101042-1a0aa0c1268d?ixlib=rb-4.0.3&auto=format&fit=crop&w=1050&q=80',
                        bakery: 'https://images.unsplash.com/photo-1509440159596-0249088772ff?ixlib=rb-4.0.3&auto=format&fit=crop&w=1052&q=80',
                        prepared: 'https://images.unsplash.com/photo-1568901346375-23c9450c58cd?ixlib=rb-4.0.3&auto=format&fit=crop&w=1050&q=80',
                        dairy: 'https://images.unsplash.com/photo-1550583724-b2692b85b150?ixlib=rb-4.0.3&auto=format&fit=crop&w=1050&q=80',
                        other: 'https://images.unsplash.com/photo-1504674900247-0877df9cc836?ixlib=rb-4.0.3&auto=format&fit=crop&w=1950&q=80'
                    };
                    
                    const newListing = {
                        name: foodName,
                        category: foodCategory,
                        quantity: foodQuantity,
                        description: foodDescription,
                        expiry: expiryDate,
                        location: "Your Location",
                        donor: "You",
                        available: true,
                        image: categoryImages[foodCategory] || categoryImages.other
                    };
                    
                    this.db.saveListing(newListing);
                    
                    // Update stats
                    const stats = this.db.getStats();
                    stats.totalDonations = (stats.totalDonations || 0) + 1;
                    this.db.updateStats(stats);
                    
                    alert('Food listing added successfully!');
                    this.hideModal('donateModal');
                    this.renderListings();
                    this.loadStats();
                });
                
                // Claim buttons
                document.addEventListener('click', (e) => {
                    if (e.target.classList.contains('btn-primary') && e.target.textContent === 'Claim') {
                        const listingId = parseInt(e.target.dataset.id);
                        const listings = this.db.getListings();
                        const listing = listings.find(l => l.id === listingId);
                        
                        if (listing && listing.available) {
                            // In a real app, this would create a claim in the database
                            this.db.addClaim({
                                listingId: listingId,
                                recipient: "Food Bank",
                                date: new Date().toISOString()
                            });
                            
                            // Update stats
                            const stats = this.db.getStats();
                            stats.mealsProvided = (stats.mealsProvided || 0) + 100; // Estimate 100 meals per claim
                            this.db.updateStats(stats);
                            
                            alert(`You've claimed: ${listing.name}\nA driver will contact you shortly!`);
                            this.renderListings();
                            this.loadStats();
                        }
                    }
                });
                
                // Filter buttons
                document.querySelectorAll('.filter-btn').forEach(btn => {
                    btn.addEventListener('click', () => {
                        document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
                        btn.classList.add('active');
                        // In a real app, this would filter the listings
                    });
                });
                
                // Start route button
                document.getElementById('startRouteBtn').addEventListener('click', () => {
                    alert('Route started! Drivers would receive navigation instructions in a real app.');
                });
            }
        }

        // Initialize the app when the page loads
        document.addEventListener('DOMContentLoaded', () => {
            const app = new FoodSaveApp();
        });
    </script>
</body>
</html>